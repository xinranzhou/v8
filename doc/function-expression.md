## 函数表达式vs函数声明
函数作为javascript中一等公民，可以作为参数，返回值，赋值给变量，同时可以隐藏变量还可以实现变量的隔离（IIFE）避免全局变量污染，最早实现模块化开发的方式。通常在开发中定义函数有两种方式，一种是函数声明，一种是函数表达式。
- 函数声明 是通过function关键字定义
- 函数表达 定义方式是将函数赋值给一个变量

那么两者之间有声明区别呢？
```javascript
// 函数声明
foo()
function foo() {
    console.log('foo')
}
// 函数表达式
foo()
var foo = function () {
    console.log('foo')
}
```
上面的试子中，函数声明的方式能正常的调用foo函数，并且能打印出`foo`,函数表达式的调用方式会抛出异常，
```javascript
Uncaught TypeError: foo is not a function
```
下面分析一下V8在编译阶段对变量的处理

在js中存在一种叫做变量提升的现象，那么v8是怎么处理变量提升，或者说为什么会出现变量提升

在编译阶段，当遇到var a = 1 赋值语句的时候，首先v8会在内存中创建一个变量a，此时v8并不会立即赋值1给变量a，只是会给一个默认值undefined，但此时内存中已经存在变量a,因为在编译阶段是将js源码转化为AST（抽象语法树），最后编译成机器码。在这个阶段中是不会执行表达式的，只是做一些变量初始化操作。所以回到上面的问题。函数声明时候为什么调用的时候不会报错？
这儿涉及到两个概念，语句与表达式
- 语句：指操作值的语句，没有返回值的运算
- 表达式：表示值的语句，赋值语句

函数声明属于语句，因为在运行
```javascript
function foo() {
    console.log('foo')
}
```
并没有任何返回值。

函数表达式
```javascript
var a = function foo() {
    console.log('foo')
}
```
在浏览器中运行可看到打印一个undefined，

继续上面函数声明定义的函数，在定义之前调用是可以正常运行，因为在编译js的时候遇到函数声明会在内存中创建一个函数对象，所以在运行的时候调用foo()就能在内存中找到对应的函数对象。而函数表达式的方式，在编译阶段foo = undefined,所以在之前调用foo()就会报错foo is not a function。

小结一下：
- 变量提升是在编译阶段形成的，定义的变量会赋与一个默认值undefined
- v8在编译阶段不会执行表达式

### 立即调用的函数表达式（IIFE）
javascript中有一个()运算符，里面可以放一个表达式，
```javascript
(a = 3)
```
括号里面是一个表达式，所以整个运算也是一个表达式，最终返回3

如果()中放一段函数的定义
```javascript
(function(){

})
```
因为()中只能是表达式，v8会把它当作一个表达式来处理，所以上面执行会返回一个函数对象。如果在后面在加上()就成为IIFE函数
```javascript
(function(){

})()
```
所以运用这个特性，只有在运行时才会创建立即执行函数中的变量，此时函数内变量只属于当前函数内，这样就会避免全局变量的污染，函数与函数之间的变量不会被其访问到。

总结：
1. 函数定义分为函数表达式与函数声明，两者之间区别在于函数声明在编译阶段会在内存中生成函数对象，函数表达式不会
2. 变量提升是在编译阶段实现
3. 立即执行函数原理是通过()将函数转化为表达式，这样在编译阶段就不会执行函数